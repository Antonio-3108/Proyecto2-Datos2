{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\fabia\\\\Dropbox\\\\PC\\\\Desktop\\\\GITHUB\\\\Semestre 5\\\\Proyecto2-Datos2\\\\Code\\\\frontend\\\\src\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login({\n  setLoggedIn\n}) {\n  _s();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  useEffect(() => {\n    // Verificar si existe una sesión al cargar el componente\n    fetch(\"http://localhost:8000/products\", {\n      credentials: 'include'\n    }).then(response => {\n      if (response.ok) {\n        setLoggedIn(true);\n      }\n    }).catch(error => {\n      console.error(\"Error checking session:\", error);\n      // No mostramos el error al usuario, solo lo registramos\n    });\n  }, [setLoggedIn]);\n  const handleLogin = async () => {\n    try {\n      setError('');\n      const response = await fetch(\"http://localhost:8000/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          username,\n          password\n        }),\n        credentials: 'include'\n      });\n      if (response.ok) {\n        setLoggedIn(true);\n      } else {\n        const data = await response.json();\n        setError(data.detail || \"Login failed\");\n      }\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      setError(\"Error connecting to server\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: \"400px\",\n      margin: \"0 auto\",\n      padding: \"20px\",\n      textAlign: \"center\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        marginBottom: \"20px\"\n      },\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: \"red\",\n        marginBottom: \"10px\",\n        padding: \"10px\",\n        backgroundColor: \"#ffebee\",\n        borderRadius: \"4px\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: \"15px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Username\",\n        value: username,\n        onChange: e => setUsername(e.target.value),\n        style: {\n          width: \"100%\",\n          padding: \"10px\",\n          marginBottom: \"10px\",\n          borderRadius: \"4px\",\n          border: \"1px solid #ddd\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: \"15px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        style: {\n          width: \"100%\",\n          padding: \"10px\",\n          marginBottom: \"10px\",\n          borderRadius: \"4px\",\n          border: \"1px solid #ddd\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleLogin,\n      style: {\n        width: \"100%\",\n        padding: \"10px\",\n        backgroundColor: \"#2E7D32\",\n        color: \"white\",\n        border: \"none\",\n        borderRadius: \"4px\",\n        cursor: \"pointer\",\n        fontSize: \"16px\"\n      },\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"5csa3mQVe5qRSi8JnclMuO5tyvQ=\");\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Login","setLoggedIn","_s","username","setUsername","password","setPassword","error","setError","fetch","credentials","then","response","ok","catch","console","handleLogin","method","headers","body","JSON","stringify","data","json","detail","style","maxWidth","margin","padding","textAlign","children","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","color","backgroundColor","borderRadius","type","placeholder","value","onChange","e","target","width","border","onClick","cursor","fontSize","_c","$RefreshReg$"],"sources":["C:/Users/fabia/Dropbox/PC/Desktop/GITHUB/Semestre 5/Proyecto2-Datos2/Code/frontend/src/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nfunction Login({ setLoggedIn }) {\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n\r\n    useEffect(() => {\r\n        // Verificar si existe una sesión al cargar el componente\r\n        fetch(\"http://localhost:8000/products\", {\r\n            credentials: 'include'\r\n        })\r\n        .then(response => {\r\n            if (response.ok) {\r\n                setLoggedIn(true);\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.error(\"Error checking session:\", error);\r\n            // No mostramos el error al usuario, solo lo registramos\r\n        });\r\n    }, [setLoggedIn]);\r\n\r\n    const handleLogin = async () => {\r\n        try {\r\n            setError('');\r\n            const response = await fetch(\"http://localhost:8000/login\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ username, password }),\r\n                credentials: 'include'\r\n            });\r\n            \r\n            if (response.ok) {\r\n                setLoggedIn(true);\r\n            } else {\r\n                const data = await response.json();\r\n                setError(data.detail || \"Login failed\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Login error:\", error);\r\n            setError(\"Error connecting to server\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            maxWidth: \"400px\",\r\n            margin: \"0 auto\",\r\n            padding: \"20px\",\r\n            textAlign: \"center\"\r\n        }}>\r\n            <h2 style={{ marginBottom: \"20px\" }}>Login</h2>\r\n            {error && (\r\n                <div style={{\r\n                    color: \"red\",\r\n                    marginBottom: \"10px\",\r\n                    padding: \"10px\",\r\n                    backgroundColor: \"#ffebee\",\r\n                    borderRadius: \"4px\"\r\n                }}>\r\n                    {error}\r\n                </div>\r\n            )}\r\n            <div style={{ marginBottom: \"15px\" }}>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Username\"\r\n                    value={username}\r\n                    onChange={e => setUsername(e.target.value)}\r\n                    style={{\r\n                        width: \"100%\",\r\n                        padding: \"10px\",\r\n                        marginBottom: \"10px\",\r\n                        borderRadius: \"4px\",\r\n                        border: \"1px solid #ddd\"\r\n                    }}\r\n                />\r\n            </div>\r\n            <div style={{ marginBottom: \"15px\" }}>\r\n                <input\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"\r\n                    value={password}\r\n                    onChange={e => setPassword(e.target.value)}\r\n                    style={{\r\n                        width: \"100%\",\r\n                        padding: \"10px\",\r\n                        marginBottom: \"10px\",\r\n                        borderRadius: \"4px\",\r\n                        border: \"1px solid #ddd\"\r\n                    }}\r\n                />\r\n            </div>\r\n            <button\r\n                onClick={handleLogin}\r\n                style={{\r\n                    width: \"100%\",\r\n                    padding: \"10px\",\r\n                    backgroundColor: \"#2E7D32\",\r\n                    color: \"white\",\r\n                    border: \"none\",\r\n                    borderRadius: \"4px\",\r\n                    cursor: \"pointer\",\r\n                    fontSize: \"16px\"\r\n                }}\r\n            >\r\n                Login\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}