{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\fabia\\\\Dropbox\\\\PC\\\\Desktop\\\\GITHUB\\\\Semestre 5\\\\Proyecto2-Datos2\\\\Code\\\\frontend\\\\src\\\\SearchBar.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction SearchBar({\n  onSearch,\n  darkMode\n}) {\n  _s();\n  const [query, setQuery] = useState(\"\");\n  const [suggestions, setSuggestions] = useState([]);\n  const [activeIndex, setActiveIndex] = useState(-1);\n  const handleChange = async e => {\n    const value = e.target.value;\n    setQuery(value);\n    setActiveIndex(-1);\n    if (value.length > 0) {\n      try {\n        const response = await fetch(`http://localhost:8000/search?query=${value}`, {\n          credentials: 'include'\n        });\n        if (response.ok) {\n          const data = await response.json();\n          onSearch(data);\n          setSuggestions(data);\n        } else {\n          onSearch([]);\n          setSuggestions([]);\n        }\n      } catch (error) {\n        console.error(\"Error fetching search results:\", error);\n        onSearch([]);\n        setSuggestions([]);\n      }\n    } else {\n      onSearch([]);\n      setSuggestions([]);\n    }\n  };\n  const handleKeyDown = e => {\n    if (e.key === \"ArrowDown\") {\n      setActiveIndex(prev => (prev + 1) % suggestions.length);\n    } else if (e.key === \"ArrowUp\") {\n      setActiveIndex(prev => (prev - 1 + suggestions.length) % suggestions.length);\n    } else if (e.key === \"Enter\" && activeIndex >= 0) {\n      const selected = suggestions[activeIndex];\n      setQuery(selected.name);\n      setSuggestions([]);\n      onSearch([selected]);\n    } else if (e.key === \"Escape\") {\n      setSuggestions([]);\n    }\n  };\n  const handleSuggestionClick = product => {\n    setQuery(product.name);\n    setSuggestions([]);\n    onSearch([product]);\n  };\n  const highlightMatch = (text, query) => {\n    const index = text.toLowerCase().indexOf(query.toLowerCase());\n    if (index === -1) return text;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [text.slice(0, index), /*#__PURE__*/_jsxDEV(\"strong\", {\n        style: {\n          backgroundColor: darkMode ? \"#3cb371\" : \"#ffff00\",\n          // verde menta o amarillo\n          color: darkMode ? \"#fff\" : \"#000\",\n          padding: \"0 2px\",\n          borderRadius: \"3px\"\n        },\n        children: text.slice(index, index + query.length)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), text.slice(index + query.length)]\n    }, void 0, true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'relative',\n      marginBottom: '24px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        backgroundColor: darkMode ? '#2c2c2c' : '#fff',\n        borderRadius: '10px',\n        padding: '12px 18px',\n        boxShadow: '0 3px 12px rgba(0, 0, 0, 0.08)',\n        border: '1px solid #ddd'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          marginRight: '12px',\n          fontSize: '18px',\n          color: darkMode ? '#aaa' : '#888'\n        },\n        children: \"\\uD83D\\uDD0D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search products...\",\n        value: query,\n        onChange: handleChange,\n        onKeyDown: handleKeyDown,\n        style: {\n          border: 'none',\n          outline: 'none',\n          fontSize: '16px',\n          width: '100%',\n          backgroundColor: 'transparent',\n          color: darkMode ? '#f0f0f0' : '#222',\n          fontFamily: \"'Segoe UI', sans-serif\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), query && suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n      style: {\n        position: \"absolute\",\n        top: \"100%\",\n        left: 0,\n        right: 0,\n        backgroundColor: darkMode ? \"#1e1e1e\" : \"#fff\",\n        border: \"1px solid #ddd\",\n        borderRadius: \"0 0 10px 10px\",\n        maxHeight: \"200px\",\n        overflowY: \"auto\",\n        boxShadow: \"0 4px 10px rgba(0,0,0,0.1)\",\n        zIndex: 10,\n        padding: 0,\n        margin: 0,\n        listStyle: \"none\"\n      },\n      children: suggestions.map((product, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        // Use _id instead of id if MongoDB returns _id\n        onClick: () => handleSuggestionClick(product),\n        style: {\n          padding: \"10px 16px\",\n          cursor: \"pointer\",\n          backgroundColor: index === activeIndex ? darkMode ? \"#333\" : \"#f0f0f0\" : \"transparent\",\n          color: darkMode ? \"#f0f0f0\" : \"#222\",\n          borderBottom: \"1px solid #eee\"\n        },\n        children: highlightMatch(product.name, query)\n      }, product._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n_s(SearchBar, \"PeJT+pxip7mRbplo5NghCOfFkn4=\");\n_c = SearchBar;\nexport default SearchBar;\nvar _c;\n$RefreshReg$(_c, \"SearchBar\");","map":{"version":3,"names":["useState","jsxDEV","_jsxDEV","Fragment","_Fragment","SearchBar","onSearch","darkMode","_s","query","setQuery","suggestions","setSuggestions","activeIndex","setActiveIndex","handleChange","e","value","target","length","response","fetch","credentials","ok","data","json","error","console","handleKeyDown","key","prev","selected","name","handleSuggestionClick","product","highlightMatch","text","index","toLowerCase","indexOf","children","slice","style","backgroundColor","color","padding","borderRadius","fileName","_jsxFileName","lineNumber","columnNumber","position","marginBottom","display","alignItems","boxShadow","border","marginRight","fontSize","type","placeholder","onChange","onKeyDown","outline","width","fontFamily","top","left","right","maxHeight","overflowY","zIndex","margin","listStyle","map","onClick","cursor","borderBottom","_id","_c","$RefreshReg$"],"sources":["C:/Users/fabia/Dropbox/PC/Desktop/GITHUB/Semestre 5/Proyecto2-Datos2/Code/frontend/src/SearchBar.js"],"sourcesContent":["import { useState } from \"react\";\r\n\r\nfunction SearchBar({ onSearch, darkMode }) {\r\n    const [query, setQuery] = useState(\"\");\r\n    const [suggestions, setSuggestions] = useState([]);\r\n    const [activeIndex, setActiveIndex] = useState(-1);\r\n\r\n    const handleChange = async (e) => {\r\n        const value = e.target.value;\r\n        setQuery(value);\r\n        setActiveIndex(-1);\r\n\r\n        if (value.length > 0) {\r\n            try {\r\n                const response = await fetch(`http://localhost:8000/search?query=${value}`, {\r\n                    credentials: 'include'\r\n                });\r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    onSearch(data);\r\n                    setSuggestions(data);\r\n                } else {\r\n                    onSearch([]);\r\n                    setSuggestions([]);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error fetching search results:\", error);\r\n                onSearch([]);\r\n                setSuggestions([]);\r\n            }\r\n        } else {\r\n            onSearch([]);\r\n            setSuggestions([]);\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (e) => {\r\n        if (e.key === \"ArrowDown\") {\r\n            setActiveIndex((prev) => (prev + 1) % suggestions.length);\r\n        } else if (e.key === \"ArrowUp\") {\r\n            setActiveIndex((prev) => (prev - 1 + suggestions.length) % suggestions.length);\r\n        } else if (e.key === \"Enter\" && activeIndex >= 0) {\r\n            const selected = suggestions[activeIndex];\r\n            setQuery(selected.name);\r\n            setSuggestions([]);\r\n            onSearch([selected]);\r\n        } else if (e.key === \"Escape\") {\r\n            setSuggestions([]);\r\n        }\r\n    };\r\n\r\n    const handleSuggestionClick = (product) => {\r\n        setQuery(product.name);\r\n        setSuggestions([]);\r\n        onSearch([product]);\r\n    };\r\n\r\n    const highlightMatch = (text, query) => {\r\n        const index = text.toLowerCase().indexOf(query.toLowerCase());\r\n        if (index === -1) return text;\r\n\r\n        return (\r\n            <>\r\n                {text.slice(0, index)}\r\n                <strong style={{\r\n                    backgroundColor: darkMode ? \"#3cb371\" : \"#ffff00\",  // verde menta o amarillo\r\n                    color: darkMode ? \"#fff\" : \"#000\",\r\n                    padding: \"0 2px\",\r\n                    borderRadius: \"3px\"\r\n                }}>\r\n                    {text.slice(index, index + query.length)}\r\n                </strong>\r\n                {text.slice(index + query.length)}\r\n            </>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div style={{ position: 'relative', marginBottom: '24px' }}>\r\n            <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                backgroundColor: darkMode ? '#2c2c2c' : '#fff',\r\n                borderRadius: '10px',\r\n                padding: '12px 18px',\r\n                boxShadow: '0 3px 12px rgba(0, 0, 0, 0.08)',\r\n                border: '1px solid #ddd'\r\n            }}>\r\n                <span style={{\r\n                    marginRight: '12px',\r\n                    fontSize: '18px',\r\n                    color: darkMode ? '#aaa' : '#888'\r\n                }}>\r\n                    🔍\r\n                </span>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Search products...\"\r\n                    value={query}\r\n                    onChange={handleChange}\r\n                    onKeyDown={handleKeyDown}\r\n                    style={{\r\n                        border: 'none',\r\n                        outline: 'none',\r\n                        fontSize: '16px',\r\n                        width: '100%',\r\n                        backgroundColor: 'transparent',\r\n                        color: darkMode ? '#f0f0f0' : '#222',\r\n                        fontFamily: \"'Segoe UI', sans-serif\"\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            {query && suggestions.length > 0 && (\r\n                <ul style={{\r\n                    position: \"absolute\",\r\n                    top: \"100%\",\r\n                    left: 0,\r\n                    right: 0,\r\n                    backgroundColor: darkMode ? \"#1e1e1e\" : \"#fff\",\r\n                    border: \"1px solid #ddd\",\r\n                    borderRadius: \"0 0 10px 10px\",\r\n                    maxHeight: \"200px\",\r\n                    overflowY: \"auto\",\r\n                    boxShadow: \"0 4px 10px rgba(0,0,0,0.1)\",\r\n                    zIndex: 10,\r\n                    padding: 0,\r\n                    margin: 0,\r\n                    listStyle: \"none\"\r\n                }}>\r\n                    {suggestions.map((product, index) => (\r\n                        <li\r\n                            key={product._id} // Use _id instead of id if MongoDB returns _id\r\n                            onClick={() => handleSuggestionClick(product)}\r\n                            style={{\r\n                                padding: \"10px 16px\",\r\n                                cursor: \"pointer\",\r\n                                backgroundColor: index === activeIndex ? (darkMode ? \"#333\" : \"#f0f0f0\") : \"transparent\",\r\n                                color: darkMode ? \"#f0f0f0\" : \"#222\",\r\n                                borderBottom: \"1px solid #eee\"\r\n                            }}\r\n                        >\r\n                            {highlightMatch(product.name, query)}\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SearchBar;\r\n"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEjC,SAASC,SAASA,CAAC;EAAEC,QAAQ;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACvC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACW,WAAW,EAAEC,cAAc,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACa,WAAW,EAAEC,cAAc,CAAC,GAAGd,QAAQ,CAAC,CAAC,CAAC,CAAC;EAElD,MAAMe,YAAY,GAAG,MAAOC,CAAC,IAAK;IAC9B,MAAMC,KAAK,GAAGD,CAAC,CAACE,MAAM,CAACD,KAAK;IAC5BP,QAAQ,CAACO,KAAK,CAAC;IACfH,cAAc,CAAC,CAAC,CAAC,CAAC;IAElB,IAAIG,KAAK,CAACE,MAAM,GAAG,CAAC,EAAE;MAClB,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,sCAAsCJ,KAAK,EAAE,EAAE;UACxEK,WAAW,EAAE;QACjB,CAAC,CAAC;QACF,IAAIF,QAAQ,CAACG,EAAE,EAAE;UACb,MAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;UAClCnB,QAAQ,CAACkB,IAAI,CAAC;UACdZ,cAAc,CAACY,IAAI,CAAC;QACxB,CAAC,MAAM;UACHlB,QAAQ,CAAC,EAAE,CAAC;UACZM,cAAc,CAAC,EAAE,CAAC;QACtB;MACJ,CAAC,CAAC,OAAOc,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;QACtDpB,QAAQ,CAAC,EAAE,CAAC;QACZM,cAAc,CAAC,EAAE,CAAC;MACtB;IACJ,CAAC,MAAM;MACHN,QAAQ,CAAC,EAAE,CAAC;MACZM,cAAc,CAAC,EAAE,CAAC;IACtB;EACJ,CAAC;EAED,MAAMgB,aAAa,GAAIZ,CAAC,IAAK;IACzB,IAAIA,CAAC,CAACa,GAAG,KAAK,WAAW,EAAE;MACvBf,cAAc,CAAEgB,IAAI,IAAK,CAACA,IAAI,GAAG,CAAC,IAAInB,WAAW,CAACQ,MAAM,CAAC;IAC7D,CAAC,MAAM,IAAIH,CAAC,CAACa,GAAG,KAAK,SAAS,EAAE;MAC5Bf,cAAc,CAAEgB,IAAI,IAAK,CAACA,IAAI,GAAG,CAAC,GAAGnB,WAAW,CAACQ,MAAM,IAAIR,WAAW,CAACQ,MAAM,CAAC;IAClF,CAAC,MAAM,IAAIH,CAAC,CAACa,GAAG,KAAK,OAAO,IAAIhB,WAAW,IAAI,CAAC,EAAE;MAC9C,MAAMkB,QAAQ,GAAGpB,WAAW,CAACE,WAAW,CAAC;MACzCH,QAAQ,CAACqB,QAAQ,CAACC,IAAI,CAAC;MACvBpB,cAAc,CAAC,EAAE,CAAC;MAClBN,QAAQ,CAAC,CAACyB,QAAQ,CAAC,CAAC;IACxB,CAAC,MAAM,IAAIf,CAAC,CAACa,GAAG,KAAK,QAAQ,EAAE;MAC3BjB,cAAc,CAAC,EAAE,CAAC;IACtB;EACJ,CAAC;EAED,MAAMqB,qBAAqB,GAAIC,OAAO,IAAK;IACvCxB,QAAQ,CAACwB,OAAO,CAACF,IAAI,CAAC;IACtBpB,cAAc,CAAC,EAAE,CAAC;IAClBN,QAAQ,CAAC,CAAC4B,OAAO,CAAC,CAAC;EACvB,CAAC;EAED,MAAMC,cAAc,GAAGA,CAACC,IAAI,EAAE3B,KAAK,KAAK;IACpC,MAAM4B,KAAK,GAAGD,IAAI,CAACE,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC9B,KAAK,CAAC6B,WAAW,CAAC,CAAC,CAAC;IAC7D,IAAID,KAAK,KAAK,CAAC,CAAC,EAAE,OAAOD,IAAI;IAE7B,oBACIlC,OAAA,CAAAE,SAAA;MAAAoC,QAAA,GACKJ,IAAI,CAACK,KAAK,CAAC,CAAC,EAAEJ,KAAK,CAAC,eACrBnC,OAAA;QAAQwC,KAAK,EAAE;UACXC,eAAe,EAAEpC,QAAQ,GAAG,SAAS,GAAG,SAAS;UAAG;UACpDqC,KAAK,EAAErC,QAAQ,GAAG,MAAM,GAAG,MAAM;UACjCsC,OAAO,EAAE,OAAO;UAChBC,YAAY,EAAE;QAClB,CAAE;QAAAN,QAAA,EACGJ,IAAI,CAACK,KAAK,CAACJ,KAAK,EAAEA,KAAK,GAAG5B,KAAK,CAACU,MAAM;MAAC;QAAA4B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpC,CAAC,EACRd,IAAI,CAACK,KAAK,CAACJ,KAAK,GAAG5B,KAAK,CAACU,MAAM,CAAC;IAAA,eACnC,CAAC;EAEX,CAAC;EAED,oBACIjB,OAAA;IAAKwC,KAAK,EAAE;MAAES,QAAQ,EAAE,UAAU;MAAEC,YAAY,EAAE;IAAO,CAAE;IAAAZ,QAAA,gBACvDtC,OAAA;MAAKwC,KAAK,EAAE;QACRW,OAAO,EAAE,MAAM;QACfC,UAAU,EAAE,QAAQ;QACpBX,eAAe,EAAEpC,QAAQ,GAAG,SAAS,GAAG,MAAM;QAC9CuC,YAAY,EAAE,MAAM;QACpBD,OAAO,EAAE,WAAW;QACpBU,SAAS,EAAE,gCAAgC;QAC3CC,MAAM,EAAE;MACZ,CAAE;MAAAhB,QAAA,gBACEtC,OAAA;QAAMwC,KAAK,EAAE;UACTe,WAAW,EAAE,MAAM;UACnBC,QAAQ,EAAE,MAAM;UAChBd,KAAK,EAAErC,QAAQ,GAAG,MAAM,GAAG;QAC/B,CAAE;QAAAiC,QAAA,EAAC;MAEH;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACPhD,OAAA;QACIyD,IAAI,EAAC,MAAM;QACXC,WAAW,EAAC,oBAAoB;QAChC3C,KAAK,EAAER,KAAM;QACboD,QAAQ,EAAE9C,YAAa;QACvB+C,SAAS,EAAElC,aAAc;QACzBc,KAAK,EAAE;UACHc,MAAM,EAAE,MAAM;UACdO,OAAO,EAAE,MAAM;UACfL,QAAQ,EAAE,MAAM;UAChBM,KAAK,EAAE,MAAM;UACbrB,eAAe,EAAE,aAAa;UAC9BC,KAAK,EAAErC,QAAQ,GAAG,SAAS,GAAG,MAAM;UACpC0D,UAAU,EAAE;QAChB;MAAE;QAAAlB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC,EAELzC,KAAK,IAAIE,WAAW,CAACQ,MAAM,GAAG,CAAC,iBAC5BjB,OAAA;MAAIwC,KAAK,EAAE;QACPS,QAAQ,EAAE,UAAU;QACpBe,GAAG,EAAE,MAAM;QACXC,IAAI,EAAE,CAAC;QACPC,KAAK,EAAE,CAAC;QACRzB,eAAe,EAAEpC,QAAQ,GAAG,SAAS,GAAG,MAAM;QAC9CiD,MAAM,EAAE,gBAAgB;QACxBV,YAAY,EAAE,eAAe;QAC7BuB,SAAS,EAAE,OAAO;QAClBC,SAAS,EAAE,MAAM;QACjBf,SAAS,EAAE,4BAA4B;QACvCgB,MAAM,EAAE,EAAE;QACV1B,OAAO,EAAE,CAAC;QACV2B,MAAM,EAAE,CAAC;QACTC,SAAS,EAAE;MACf,CAAE;MAAAjC,QAAA,EACG7B,WAAW,CAAC+D,GAAG,CAAC,CAACxC,OAAO,EAAEG,KAAK,kBAC5BnC,OAAA;QACsB;QAClByE,OAAO,EAAEA,CAAA,KAAM1C,qBAAqB,CAACC,OAAO,CAAE;QAC9CQ,KAAK,EAAE;UACHG,OAAO,EAAE,WAAW;UACpB+B,MAAM,EAAE,SAAS;UACjBjC,eAAe,EAAEN,KAAK,KAAKxB,WAAW,GAAIN,QAAQ,GAAG,MAAM,GAAG,SAAS,GAAI,aAAa;UACxFqC,KAAK,EAAErC,QAAQ,GAAG,SAAS,GAAG,MAAM;UACpCsE,YAAY,EAAE;QAClB,CAAE;QAAArC,QAAA,EAEDL,cAAc,CAACD,OAAO,CAACF,IAAI,EAAEvB,KAAK;MAAC,GAV/ByB,OAAO,CAAC4C,GAAG;QAAA/B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAWhB,CACP;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CACP;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd;AAAC1C,EAAA,CAnJQH,SAAS;AAAA0E,EAAA,GAAT1E,SAAS;AAqJlB,eAAeA,SAAS;AAAC,IAAA0E,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}